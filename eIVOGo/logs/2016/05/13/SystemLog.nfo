2016/05/13 16:38:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:38:35
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:38:35
event message處理完成!
2016/05/13 16:39:25
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[KeyID] = @p0
-- @p0: Input UniqueIdentifier (Size = -1; Prec = 0; Scale = 0) [64120a22-40c2-45c7-80ab-2293a703f4a6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:39:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1303]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:39:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1309]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:39:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:21:07]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:39:26]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:39:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:39:26]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:39:26]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t4].[test], [t4].[InvoiceID], [t4].[No], [t4].[InvoiceDate], [t4].[CheckNo], [t4].[Remark], [t4].[BuyerRemark], [t4].[CustomsClearanceMark], [t4].[TaxCenter], [t4].[PermitDate], [t4].[PermitWord], [t4].[PermitNumber], [t4].[Category], [t4].[RelateNumber], [t4].[InvoiceType], [t4].[GroupMark], [t4].[DonateMark], [t4].[SellerID], [t4].[DonationID], [t4].[RandomNo], [t4].[TrackCode], [t4].[PrintMark]
FROM [dbo].[DocumentSubscriptionQueue] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t0].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t3].[InvoiceID], [t3].[No], [t3].[InvoiceDate], [t3].[CheckNo], [t3].[Remark], [t3].[BuyerRemark], [t3].[CustomsClearanceMark], [t3].[TaxCenter], [t3].[PermitDate], [t3].[PermitWord], [t3].[PermitNumber], [t3].[Category], [t3].[RelateNumber], [t3].[InvoiceType], [t3].[GroupMark], [t3].[DonateMark], [t3].[SellerID], [t3].[DonationID], [t3].[RandomNo], [t3].[TrackCode], [t3].[PrintMark]
    FROM [dbo].[InvoiceItem] AS [t3]
    ) AS [t4] ON [t4].[InvoiceID] = [t1].[DocID]
WHERE ([t4].[SellerID] = @p0) AND ([t2].[ClientID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:40:49
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051301]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [64886144]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1318775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1318775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1318775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1318775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:40:48]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051301]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2205]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [105]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE64886144]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2100]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [105]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/12 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2100]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6265]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:40:54
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:40:54
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6265]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:40:48]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597766]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:40:54
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:40:54
event message處理完成!
2016/05/13 16:41:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051302]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [64883576]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148226]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148226]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148226]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148226]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:41:26]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051302]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [6458]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [308]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE64883576]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [6150]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [308]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/22 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [6150]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6266]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:26
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:26
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6266]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:41:26]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597767]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:26
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:26
event message處理完成!
2016/05/13 16:41:58
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051303]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [64883511]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148161]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148161]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148161]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1148161]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:41:58]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016051303]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [20000]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [952]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE64883511]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [19048]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [952]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/22 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [19048]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6267]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [53044442]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [嵐宇科技股份有限公司]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [4149518370505232]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:58
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6267]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:41:58]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597768]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:41:58
event message處理完成!
2016/05/13 16:43:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:43:33
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:43:33
event message處理完成!
2016/05/13 16:43:37
SELECT [t0].[TrackID], [t0].[TrackCode], [t0].[Year], [t0].[PeriodNo]
FROM [dbo].[InvoiceTrackCode] AS [t0]
WHERE ([t0].[Year] = @p0) AND ([t0].[PeriodNo] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2016]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [186]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [187]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [188]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [189]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [190]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [191]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [262]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [268]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [274]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [280]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackID], [t0].[SellerID]
FROM [dbo].[InvoiceTrackCodeAssignment] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT CONVERT(Int,[t0].[No]) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [292]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [299]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [321]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackID], [t0].[SellerID]
FROM [dbo].[InvoiceTrackCodeAssignment] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT CONVERT(Int,[t0].[No]) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GE]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [332]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [313]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [193]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [194]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [195]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [196]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [125]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [197]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [198]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [143]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [143]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [143]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [305]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [200]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [149]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [149]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [149]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [328]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [337]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackID], [t0].[SellerID]
FROM [dbo].[InvoiceTrackCodeAssignment] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT CONVERT(Int,[t0].[No]) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GT]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [160]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [201]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackID], [t0].[SellerID]
FROM [dbo].[InvoiceTrackCodeAssignment] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT CONVERT(Int,[t0].[No]) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GW]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [329]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [203]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [203]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UAID], [t0].[TrackID], [t0].[SellerID], [t0].[InvoiceBeginNo], [t0].[InvoiceEndNo]
FROM [dbo].[UnassignedInvoiceNo] AS [t0]
WHERE ([t0].[TrackID] = @p0) AND ([t0].[SellerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [203]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceNo] AS [value]
FROM [dbo].[InvoiceNoAssignment] AS [t0]
WHERE [t0].[IntervalID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [344]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [204]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [205]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[IntervalID], [t0].[TrackID], [t0].[SellerID], [t0].[StartNo], [t0].[EndNo]
FROM [dbo].[InvoiceNoInterval] AS [t0]
WHERE [t0].[TrackID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [206]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67537259]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67537799]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [64888352]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64889449]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67870250]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67871749]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67872250]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67912249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67856453]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67856453]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67857442]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857447]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67857451]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857922]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67857984]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857986]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67858782]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67858782]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67862323]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67862323]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67863705]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67863705]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67863840]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67863843]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67865395]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67865397]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67865563]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67865563]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67866273]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67870199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67912250]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67927249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [67871750]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67872249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [19538583]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [19540499]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [64869347]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64869699]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [81375607]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [81379449]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [143]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [81824256]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [81825599]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [149]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [66364158]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [66364199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [95527452]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [95528199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [74304250]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [74309249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [64579050]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64579149]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [84975301]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [84975349]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[UnassignedInvoiceNo]([TrackID], [SellerID], [InvoiceBeginNo], [InvoiceEndNo])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [203]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [26820400]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [26820499]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8803]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2379]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67537259]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67537799]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8804]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2374]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64888352]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [64889449]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8805]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2380]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67870250]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67871749]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8806]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2381]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67872250]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67912249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8807]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67856453]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67856453]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8808]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857442]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67857447]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8809]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857451]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67857922]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8810]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67857984]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67857986]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8811]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67858782]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67858782]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8812]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67862323]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67862323]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8813]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67863705]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67863705]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8814]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67863840]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67863843]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8815]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67865395]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67865397]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8816]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67865563]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67865563]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8817]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2382]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67866273]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67870199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8818]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2388]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67912250]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67927249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8819]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2365]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [67871750]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [67872249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8820]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2369]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [19538583]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [19540499]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8821]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [118]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2373]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64869347]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [64869699]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8822]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2362]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [81375607]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [81379449]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8823]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [143]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [81824256]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [81825599]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8824]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [149]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [66364158]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [66364199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8825]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2371]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [95527452]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [95528199]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8826]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [155]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2375]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [74304250]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [74309249]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8827]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2386]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [64579050]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [64579149]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8828]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [202]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2403]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [84975301]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [84975349]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[UnassignedInvoiceNo] WHERE ([UAID] = @p0) AND ([TrackID] = @p1) AND ([SellerID] = @p2) AND ([InvoiceBeginNo] = @p3) AND ([InvoiceEndNo] = @p4)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [8829]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [203]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2424]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [26820400]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [26820499]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:48:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:48:33
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:48:33
event message處理完成!
2016/05/13 16:53:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:53:33
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:53:33
event message處理完成!
2016/05/13 16:54:11
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:54:11]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [60000]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823680]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6268]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:11
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:11
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6268]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:54:11]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597769]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:11
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:11
event message處理完成!
2016/05/13 16:54:39
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:54:39]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [500]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823279]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/20 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:39
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:39
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:54:39]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597770]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:39
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:54:39
event message處理完成!
2016/05/13 16:58:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:58:33
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 16:58:33
event message處理完成!
2016/05/13 17:01:14
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [82016/05/13 17:01:16
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:21
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6270]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:01:13]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597771]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:21
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:21
event message處理完成!
2016/05/13 17:01:42
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:01:42]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [500]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823279]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/20 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6271]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:42
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:42
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6271]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:01:42]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597772]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:42
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:01:42
event message處理完成!
2016/05/13 17:03:07
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:07
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:07
event message處理完成!
2016/05/13 17:03:08
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:08
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
event message處理完成!
2016/05/13 17:03:09
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050901</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>1329794414088184</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>7126</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/26</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823680</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>57143</UnitPrice>
    <Amount>57143</Amount>
    <Tax>2857</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>2857</TaxAmount>
  <TotalAmount>60000</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:03:08]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Allowance data already exists:2016050901]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050902</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>8696271745665380</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>3239</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/20</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823279</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>476</UnitPrice>
    <Amount>476</Amount>
    <Tax>24</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>24</TaxAmount>
  <TotalAmount>500</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:03:09]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Allowance data already exists:2016050902]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:09
event message處理完成!
2016/05/13 17:03:17
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:18
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:18
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137043]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:18
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:18
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:03:19
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137044]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:04:20
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:04:20
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:04:20
event message處理完成!
2016/05/13 17:09:31
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:09:31
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:09:31
event message處理完成!
2016/05/13 17:10:33
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1303]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:10:33
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1309]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:10:33
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 04:39:26]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:10:33]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:10:33
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:10:33]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:10:33]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t4].[test], [t4].[InvoiceID], [t4].[No], [t4].[InvoiceDate], [t4].[CheckNo], [t4].[Remark], [t4].[BuyerRemark], [t4].[CustomsClearanceMark], [t4].[TaxCenter], [t4].[PermitDate], [t4].[PermitWord], [t4].[PermitNumber], [t4].[Category], [t4].[RelateNumber], [t4].[InvoiceType], [t4].[GroupMark], [t4].[DonateMark], [t4].[SellerID], [t4].[DonationID], [t4].[RandomNo], [t4].[TrackCode], [t4].[PrintMark]
FROM [dbo].[DocumentSubscriptionQueue] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t0].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t3].[InvoiceID], [t3].[No], [t3].[InvoiceDate], [t3].[CheckNo], [t3].[Remark], [t3].[BuyerRemark], [t3].[CustomsClearanceMark], [t3].[TaxCenter], [t3].[PermitDate], [t3].[PermitWord], [t3].[PermitNumber], [t3].[Category], [t3].[RelateNumber], [t3].[InvoiceType], [t3].[GroupMark], [t3].[DonateMark], [t3].[SellerID], [t3].[DonationID], [t3].[RandomNo], [t3].[TrackCode], [t3].[PrintMark]
    FROM [dbo].[InvoiceItem] AS [t3]
    ) AS [t4] ON [t4].[InvoiceID] = [t1].[DocID]
WHERE ([t4].[SellerID] = @p0) AND ([t2].[ClientID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:11:22
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:11:22]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:11:22]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:13:58
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:13:58]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:13:58]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:05
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:05]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:05]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:12
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:12]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:12
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:12]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:14:12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:30
event message處理完成!
2016/05/13 17:14:41
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND (([t0].[MESSAGE_DTS] >= @p2) OR ([t0].[InvoiceDate] >= @p3))
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:14:41
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[InvoiceID]
WHERE ([t0].[InvoiceDate] >= @p0) AND ([t1].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[TrackCode] + [t1].[No] AS [value]
FROM [dbo].[CDS_Document] AS [t0]
INNER JOIN [dbo].[InvoiceItem] AS [t1] ON ((
    SELECT [t2].[SourceID]
    FROM [dbo].[DerivedDocument] AS [t2]
    WHERE [t2].[DocID] = [t0].[DocID]
    )) = [t1].[InvoiceID]
WHERE ([t0].[DocType] = @p0) AND ([t1].[InvoiceDate] >= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[CDS_Document] AS [t0]
LEFT OUTER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[DocID]
WHERE ([t1].[AllowanceDate] >= @p0) AND ([t0].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[InvoiceAllowanceCancellation] AS [t0]
INNER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[AllowanceID]
WHERE ([t1].[AllowanceDate] >= @p0) OR ([t0].[CancelDate] >= @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:19:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:19:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:19:30
event message處理完成!
2016/05/13 17:21:18
SELECT TOP (1) [t0].[UID], [t0].[UserName], [t0].[PID], [t0].[Password], [t0].[ContactTitle], [t0].[Address], [t0].[City], [t0].[Region], [t0].[PostalCode], [t0].[Country], [t0].[MobilePhone], [t0].[Phone], [t0].[Phone2], [t0].[Fax], [t0].[EMail], [t0].[Expiration], [t0].[Creator], [t0].[AuthID], [t0].[LevelID], [t0].[ThemeName], [t0].[Password2], [t2].[test], [t2].[UID] AS [UID2], [t2].[CurrentLevel]
FROM [dbo].[UserProfile] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[UID], [t1].[CurrentLevel]
    FROM [dbo].[UserProfileStatus] AS [t1]
    ) AS [t2] ON [t2].[UID] = [t0].[UID]
WHERE ([t0].[PID] = @p0) AND ([t2].[CurrentLevel] <> @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [ifsadmin]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1101]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[UID], [t0].[RoleID], [t0].[OrgaCateID], [t1].[OrgaCateID] AS [OrgaCateID2], [t1].[CompanyID], [t1].[CategoryID], [t2].[ContactName], [t2].[Fax], [t2].[LogoURL], [t2].[CompanyName], [t2].[CompanyID] AS [CompanyID2], [t2].[ReceiptNo], [t2].[Phone], [t2].[ContactFax], [t2].[ContactPhone], [t2].[ContactMobilePhone], [t2].[RegAddr], [t2].[UndertakerName], [t2].[Addr], [t2].[EnglishName], [t2].[EnglishAddr], [t2].[EnglishRegAddr], [t2].[ContactEmail], [t2].[UndertakerPhone], [t2].[UndertakerFax], [t2].[UndertakerMobilePhone], [t2].[InvoiceSignature], [t2].[UndertakerID], [t2].[ContactTitle], [t3].[CategoryID] AS [CategoryID2], [t3].[Category], [t3].[CharacterURL], [t4].[RoleID] AS [RoleID2], [t4].[SiteMenu], [t4].[Role]
FROM [dbo].[UserRole] AS [t0]
INNER JOIN ([dbo].[OrganizationCategory] AS [t1]
    INNER JOIN [dbo].[Organization] AS [t2] ON [t2].[CompanyID] = [t1].[CompanyID]
    INNER JOIN [dbo].[CategoryDefinition] AS [t3] ON [t3].[CategoryID] = [t1].[CategoryID]) ON [t1].[OrgaCateID] = [t0].[OrgaCateID]
INNER JOIN [dbo].[UserRoleDefinition] AS [t4] ON [t4].[RoleID] = [t0].[RoleID]
WHERE [t0].[UID] = @x1
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:21:19
SELECT TOP (1) [t1].[MenuID], [t1].[SiteMenu]
FROM [dbo].[UserMenu] AS [t0]
INNER JOIN [dbo].[MenuControl] AS [t1] ON [t1].[MenuID] = [t0].[MenuID]
WHERE ([t0].[RoleID] = @p0) AND ([t0].[CategoryID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:21:20
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:21:19]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:21:19]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:21:21
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND (([t0].[MESSAGE_DTS] >= @p2) OR ([t0].[InvoiceDate] >= @p3))
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:21:21
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[InvoiceID]
WHERE ([t0].[InvoiceDate] >= @p0) AND ([t1].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[TrackCode] + [t1].[No] AS [value]
FROM [dbo].[CDS_Document] AS [t0]
INNER JOIN [dbo].[InvoiceItem] AS [t1] ON ((
    SELECT [t2].[SourceID]
    FROM [dbo].[DerivedDocument] AS [t2]
    WHERE [t2].[DocID] = [t0].[DocID]
    )) = [t1].[InvoiceID]
WHERE ([t0].[DocType] = @p0) AND ([t1].[InvoiceDate] >= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[CDS_Document] AS [t0]
LEFT OUTER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[DocID]
WHERE ([t1].[AllowanceDate] >= @p0) AND ([t0].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[InvoiceAllowanceCancellation] AS [t0]
INNER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[AllowanceID]
WHERE ([t1].[AllowanceDate] >= @p0) OR ([t0].[CancelDate] >= @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/3/13 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:23:51
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:23:47]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [60000]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823680]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6272]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:23:51
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:23:57
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6272]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:23:47]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597773]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:23:57
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:23:57
event message處理完成!
2016/05/13 17:24:26
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:24:26]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [500]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823279]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/20 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6273]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:26
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:27
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6273]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:24:26]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597774]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:27
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:27
event message處理完成!
2016/05/13 17:24:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:24:30
event message處理完成!
2016/05/13 17:27:17
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:27:15]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [60000]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823680]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6274]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:27:17
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:27:38
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6274]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:27:15]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597775]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:27:38
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:27:38
event message處理完成!
2016/05/13 17:28:11
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[ProductID], [t0].[No], [t0].[Spec], [t0].[Piece], [t0].[Piece2], [t0].[PieceUnit], [t0].[PieceUnit2], [t0].[Weight], [t0].[WeightUnit], [t0].[UnitFreight], [t0].[UnitCost], [t0].[UnitCost2], [t0].[FreightAmount], [t0].[CostAmount], [t0].[CostAmount2], [t0].[OriginalPrice], [t0].[Remark], [t0].[RelateNumber], [t0].[TaxType], [t0].[ItemNo]
FROM [dbo].[InvoiceProductItem] AS [t0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ProductID]
FROM [dbo].[InvoiceDetails] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:28:10]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [500]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823279]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/20 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6275]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:28:11
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:28:11
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6275]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:28:10]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597776]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:28:11
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:28:11
event message處理完成!
2016/05/13 17:29:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:29:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:29:30
event message處理完成!
2016/05/13 17:34:29
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:34:29
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:34:29
event message處理完成!
2016/05/13 17:35:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:35:59
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:35:59
event message處理完成!
2016/05/13 17:38:09
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE (CONVERT(Decimal(33,4),[t3].[No])) = @p0
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:09
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:09
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050901</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>1329794414088184</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>7126</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/26</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823680</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>57143</UnitPrice>
    <Amount>57143</Amount>
    <Tax>2857</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>2857</TaxAmount>
  <TotalAmount>60000</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:38:09]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:09
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:09
event message處理完成!
2016/05/13 17:38:09
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:11
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:11
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137045]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE (CONVERT(Decimal(33,4),[t3].[No])) = @p0
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050902</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>8696271745665380</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>3239</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/20</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823279</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>476</UnitPrice>
    <Amount>476</Amount>
    <Tax>24</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>24</TaxAmount>
  <TotalAmount>500</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:38:34]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
event message處理完成!
2016/05/13 17:38:34
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:38:34
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137046]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:04
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE (CONVERT(Decimal(33,4),[t3].[No])) = @p0
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:04
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050901</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>1329794414088184</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>7126</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/26</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823680</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>57143</UnitPrice>
    <Amount>57143</Amount>
    <Tax>2857</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>2857</TaxAmount>
  <TotalAmount>60000</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:40:04]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:06
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:06
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:06
event message處理完成!
2016/05/13 17:40:08
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:09
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:09
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137047]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1303]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN ([dbo].[CDS_Document] AS [t1]
    LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]) ON [t0].[InvoiceID] = [t1].[DocID]
INNER JOIN [dbo].[InvoiceDeliveryTracking] AS [t3] ON [t0].[InvoiceID] = [t3].[InvoiceID]
WHERE ([t0].[SellerID] = @p0) AND ([t2].[ClientID] = @p1) AND ([t3].[DeliveryStatus] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1309]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:10:33]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:40:32]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p10
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND ([SetToPrintInvoice] = @p4) AND ([InvoicePrintView] = @p5) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND (NOT ([SetToOutsourcingCS] = 1)) AND ([AllowancePrintView] = @p6) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND ([PrintAll] = @p7) AND ([SettingInvoiceType] = @p8) AND ([SubscribeB2BInvoicePDF] = @p9) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:40:32]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) []
-- @p7: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p8: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p9: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p10: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:40:32]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t4].[test], [t4].[InvoiceID], [t4].[No], [t4].[InvoiceDate], [t4].[CheckNo], [t4].[Remark], [t4].[BuyerRemark], [t4].[CustomsClearanceMark], [t4].[TaxCenter], [t4].[PermitDate], [t4].[PermitWord], [t4].[PermitNumber], [t4].[Category], [t4].[RelateNumber], [t4].[InvoiceType], [t4].[GroupMark], [t4].[DonateMark], [t4].[SellerID], [t4].[DonationID], [t4].[RandomNo], [t4].[TrackCode], [t4].[PrintMark]
FROM [dbo].[DocumentSubscriptionQueue] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t0].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t3].[InvoiceID], [t3].[No], [t3].[InvoiceDate], [t3].[CheckNo], [t3].[Remark], [t3].[BuyerRemark], [t3].[CustomsClearanceMark], [t3].[TaxCenter], [t3].[PermitDate], [t3].[PermitWord], [t3].[PermitNumber], [t3].[Category], [t3].[RelateNumber], [t3].[InvoiceType], [t3].[GroupMark], [t3].[DonateMark], [t3].[SellerID], [t3].[DonationID], [t3].[RandomNo], [t3].[TrackCode], [t3].[PrintMark]
    FROM [dbo].[InvoiceItem] AS [t3]
    ) AS [t4] ON [t4].[InvoiceID] = [t1].[DocID]
WHERE ([t4].[SellerID] = @p0) AND ([t2].[ClientID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GoogleGUI]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE (CONVERT(Decimal(33,4),[t3].[No])) = @p0
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<AllowanceRootAllowance xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <AllowanceNumber>2016050902</AllowanceNumber>
  <AllowanceDate>2016/05/03</AllowanceDate>
  <GoogleId>8696271745665380</GoogleId>
  <SellerId>27934855</SellerId>
  <SellerName>美商科高國際有限公司台灣分公司</SellerName>
  <BuyerId>0000000000</BuyerId>
  <BuyerName>3239</BuyerName>
  <AllowanceType>1</AllowanceType>
  <AllowanceItem>
    <OriginalInvoiceDate>2016/04/20</OriginalInvoiceDate>
    <OriginalInvoiceNumber>GQ81823279</OriginalInvoiceNumber>
    <OriginalSequenceNumber>1</OriginalSequenceNumber>
    <OriginalDescription>1</OriginalDescription>
    <Quantity>1</Quantity>
    <UnitPrice>476</UnitPrice>
    <Amount>476</Amount>
    <Tax>24</Tax>
    <AllowanceSequenceNumber>1</AllowanceSequenceNumber>
    <TaxType>1</TaxType>
  </AllowanceItem>
  <TaxAmount>24</TaxAmount>
  <TotalAmount>500</TotalAmount>
</AllowanceRootAllowance>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:40:39]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding.]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
event message處理完成!
2016/05/13 17:40:39
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:39
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [137048]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:40:58
event message處理完成!
2016/05/13 17:45:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:45:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:45:58
event message處理完成!
2016/05/13 17:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:47:46
event message處理完成!
2016/05/13 17:48:22
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:48:22]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:48:22]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:48:39
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:48:39]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:48:39]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:34
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823680]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE ((CONVERT(Decimal(33,4),[t3].[No])) = @p0) AND ([t0].[InvoiceID] = @p1)
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1435597]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:49:33]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050901]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [60000]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823680]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [2857]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/26 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [57143]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6276]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7126]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1329794414088184]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:34
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:40
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6276]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:49:33]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597777]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:40
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:40
event message處理完成!
2016/05/13 17:49:44
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [7686904123E918422DC05E446075DC1A9A8267A6]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[AgentID], [t0].[IssuerID]
FROM [dbo].[InvoiceIssuerAgent] AS [t0]
WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceAllowance] AS [t0]
            WHERE [t0].[AllowanceNumber] = @p0
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t0].[InvoiceID], [t0].[No], [t0].[InvoiceDate], [t0].[CheckNo], [t0].[Remark], [t0].[BuyerRemark], [t0].[CustomsClearanceMark], [t0].[TaxCenter], [t0].[PermitDate], [t0].[PermitWord], [t0].[PermitNumber], [t0].[Category], [t0].[RelateNumber], [t0].[InvoiceType], [t0].[GroupMark], [t0].[DonateMark], [t0].[SellerID], [t0].[DonationID], [t0].[RandomNo], [t0].[TrackCode], [t0].[PrintMark]
FROM [dbo].[InvoiceItem] AS [t0]
WHERE ([t0].[TrackCode] = @p0) AND ([t0].[No] = @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [81823279]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CancellationNo], [t0].[CancelDate], [t0].[ReturnTaxDocumentNo], [t0].[Remark], [t0].[InvoiceID], [t0].[CancelReason]
FROM [dbo].[InvoiceCancellation] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[BuyerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark], [t0].[CustomerNumber]
FROM [dbo].[InvoiceBuyer] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[InvoiceID], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[Name], [t0].[SellerID], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[CustomerName], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceSeller] AS [t0]
WHERE [t0].[InvoiceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT TOP (1) [t3].[ItemID], [t3].[ProductID], [t3].[No], [t3].[Spec], [t3].[Piece], [t3].[Piece2], [t3].[PieceUnit], [t3].[PieceUnit2], [t3].[Weight], [t3].[WeightUnit], [t3].[UnitFreight], [t3].[UnitCost], [t3].[UnitCost2], [t3].[FreightAmount], [t3].[CostAmount], [t3].[CostAmount2], [t3].[OriginalPrice], [t3].[Remark], [t3].[RelateNumber], [t3].[TaxType], [t3].[ItemNo]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[InvoiceDetails] AS [t1] ON [t0].[InvoiceID] = [t1].[InvoiceID]
INNER JOIN [dbo].[InvoiceProduct] AS [t2] ON [t1].[ProductID] = [t2].[ProductID]
INNER JOIN [dbo].[InvoiceProductItem] AS [t3] ON ([t2].[ProductID]) = [t3].[ProductID]
WHERE ((CONVERT(Decimal(33,4),[t3].[No])) = @p0) AND ([t0].[InvoiceID] = @p1)
-- @p0: Input Decimal (Size = -1; Prec = 33; Scale = 4) [1]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1387152]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[CDS_Document]([DocType], [DocDate], [CurrentStep], [ChannelID])
VALUES (@p0, @p1, @p2, @p3)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:49:44]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowance]([AllowanceID], [AllowanceNumber], [AllowanceType], [AllowanceDate], [TotalAmount], [TaxAmount], [InvoiceID], [SellerId], [BuyerId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [2016050902]
-- @p2: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/3 上午 12:00:00]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [500]
-- @p5: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p6: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[DocumentOwner]([DocID], [OwnerID], [ClientID])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceItem]([No], [InvoiceNo], [Piece], [Amount], [Tax], [ProductItemID], [InvoiceDate], [ItemNo], [OriginalSequenceNo], [PieceUnit], [OriginalDescription], [TaxType], [UnitCost], [UnitCost2], [Piece2], [Amount2], [PieceUnit2], [Remark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [GQ81823279]
-- @p2: Input Decimal (Size = -1; Prec = 18; Scale = 5) [1]
-- @p3: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p4: Input Decimal (Size = -1; Prec = 18; Scale = 5) [24]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/4/20 上午 12:00:00]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p8: Input SmallInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [1]
-- @p11: Input TinyInt (Size = -1; Prec = 0; Scale = 0) [1]
-- @p12: Input Decimal (Size = -1; Prec = 18; Scale = 5) [476]
-- @p13: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p14: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p15: Input Decimal (Size = -1; Prec = 18; Scale = 5) [Null]
-- @p16: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p17: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceDetails]([AllowanceID], [ItemID])
VALUES (@p0, @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [6277]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceBuyer]([AllowanceID], [BuyerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [3239]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

INSERT INTO [dbo].[InvoiceAllowanceSeller]([AllowanceID], [SellerID], [Name], [CustomerName], [ReceiptNo], [PostCode], [Address], [CustomerID], [ContactName], [Phone], [EMail], [Fax], [PersonInCharge], [RoleRemark])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [美商科高國際有限公司台灣分公司]
-- @p4: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27934855]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p6: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [台北市信義區信義路五段7號73樓之1]
-- @p7: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [8696271745665380]
-- @p8: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Phoebe Sheng]
-- @p9: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [86-21-61157989]
-- @p10: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [wendyyan@google.com,alexanderch@google.com,Lauria@google.com,sb_eivo@uxb2b.com,invoice_services03@uxb2b.com]
-- @p11: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- @p12: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [霍客]
-- @p13: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:44
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:45
SELECT TOP (1) [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE ([t0].[DocID] = @p0) AND ([t0].[TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[DocType], [t0].[DocDate], [t0].[CurrentStep], [t0].[ChannelID]
FROM [dbo].[CDS_Document] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[AllowanceNumber], [t0].[AllowanceType], [t0].[AllowanceDate], [t0].[TotalAmount], [t0].[TaxAmount], [t0].[InvoiceID], [t0].[SellerId], [t0].[BuyerId]
FROM [dbo].[InvoiceAllowance] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[BuyerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceBuyer] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[SellerID], [t0].[Name], [t0].[CustomerName], [t0].[ReceiptNo], [t0].[PostCode], [t0].[Address], [t0].[CustomerID], [t0].[ContactName], [t0].[Phone], [t0].[EMail], [t0].[Fax], [t0].[PersonInCharge], [t0].[RoleRemark]
FROM [dbo].[InvoiceAllowanceSeller] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[AllowanceID], [t0].[ItemID]
FROM [dbo].[InvoiceAllowanceDetails] AS [t0]
WHERE [t0].[AllowanceID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ItemID], [t0].[No], [t0].[InvoiceNo], [t0].[Piece], [t0].[Amount], [t0].[Tax], [t0].[ProductItemID], [t0].[InvoiceDate], [t0].[ItemNo], [t0].[OriginalSequenceNo], [t0].[PieceUnit], [t0].[OriginalDescription], [t0].[TaxType], [t0].[UnitCost], [t0].[UnitCost2], [t0].[Piece2], [t0].[Amount2], [t0].[PieceUnit2], [t0].[Remark]
FROM [dbo].[InvoiceAllowanceItem] AS [t0]
WHERE [t0].[ItemID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [6277]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[OwnerID], [t0].[ClientID]
FROM [dbo].[DocumentOwner] AS [t0]
WHERE [t0].[DocID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2359]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

UPDATE [dbo].[CDS_Document]
SET [CurrentStep] = @p3
WHERE ([DocID] = @p0) AND ([DocType] = @p1) AND ([DocDate] = @p2) AND ([CurrentStep] IS NULL) AND ([ChannelID] IS NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/5/13 下午 05:49:44]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

DELETE FROM [dbo].[DocumentDispatch] WHERE ([DocID] = @p0) AND ([TypeID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1597778]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:45
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:49:45
event message處理完成!
2016/05/13 17:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:52:46
event message處理完成!
2016/05/13 17:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 17:57:46
event message處理完成!
2016/05/13 18:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:02:46
event message處理完成!
2016/05/13 18:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:07:46
event message處理完成!
2016/05/13 18:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:12:46
event message處理完成!
2016/05/13 18:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:17:46
event message處理完成!
2016/05/13 18:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:22:46
event message處理完成!
2016/05/13 18:27:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:27:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:27:46
event message處理完成!
2016/05/13 18:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:32:46
event message處理完成!
2016/05/13 18:37:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:37:46
event message處理完成!
2016/05/13 18:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:42:46
event message處理完成!
2016/05/13 18:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:47:46
event message處理完成!
2016/05/13 18:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:52:46
event message處理完成!
2016/05/13 18:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 18:57:46
event message處理完成!
2016/05/13 19:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:02:46
event message處理完成!
2016/05/13 19:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:07:46
event message處理完成!
2016/05/13 19:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:12:46
event message處理完成!
2016/05/13 19:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:17:46
event message處理完成!
2016/05/13 19:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:22:46
event message處理完成!
2016/05/13 19:27:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:27:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:27:46
event message處理完成!
2016/05/13 19:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:32:46
event message處理完成!
2016/05/13 19:37:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:37:46
event message處理完成!
2016/05/13 19:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:42:46
event message處理完成!
2016/05/13 19:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:47:46
event message處理完成!
2016/05/13 19:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:52:46
event message處理完成!
2016/05/13 19:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 19:57:46
event message處理完成!
2016/05/13 20:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:02:46
event message處理完成!
2016/05/13 20:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:07:46
event message處理完成!
2016/05/13 20:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:12:46
event message處理完成!
2016/05/13 20:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:17:46
event message處理完成!
2016/05/13 20:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:22:46
event message處理完成!
2016/05/13 20:27:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:27:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:27:46
event message處理完成!
2016/05/13 20:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:32:46
event message處理完成!
2016/05/13 20:37:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:37:46
event message處理完成!
2016/05/13 20:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:42:46
event message處理完成!
2016/05/13 20:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:47:46
event message處理完成!
2016/05/13 20:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:52:46
event message處理完成!
2016/05/13 20:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 20:57:46
event message處理完成!
2016/05/13 21:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:02:46
event message處理完成!
2016/05/13 21:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:07:46
event message處理完成!
2016/05/13 21:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:12:46
event message處理完成!
2016/05/13 21:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:17:46
event message處理完成!
2016/05/13 21:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:22:46
event message處理完成!
2016/05/13 21:27:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:27:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:27:46
event message處理完成!
2016/05/13 21:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:32:46
event message處理完成!
2016/05/13 21:37:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:37:46
event message處理完成!
2016/05/13 21:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:42:46
event message處理完成!
2016/05/13 21:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:47:46
event message處理完成!
2016/05/13 21:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:52:46
event message處理完成!
2016/05/13 21:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 21:57:46
event message處理完成!
2016/05/13 22:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:02:46
event message處理完成!
2016/05/13 22:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:07:46
event message處理完成!
2016/05/13 22:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:12:46
event message處理完成!
2016/05/13 22:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:17:46
event message處理完成!
2016/05/13 22:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:22:46
event message處理完成!
2016/05/13 22:27:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:27:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:27:46
event message處理完成!
2016/05/13 22:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:32:46
event message處理完成!
2016/05/13 22:37:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:37:46
event message處理完成!
2016/05/13 22:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:42:46
event message處理完成!
2016/05/13 22:47:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:47:46
event message處理完成!
2016/05/13 22:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:52:46
event message處理完成!
2016/05/13 22:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 22:57:46
event message處理完成!
2016/05/13 23:02:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:02:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:02:46
event message處理完成!
2016/05/13 23:07:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:07:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:07:46
event message處理完成!
2016/05/13 23:12:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:12:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:12:46
event message處理完成!
2016/05/13 23:17:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:17:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:17:46
event message處理完成!
2016/05/13 23:22:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:22:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:22:46
event message處理完成!
2016/05/13 23:27:45
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:27:45
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:27:45
event message處理完成!
2016/05/13 23:32:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:32:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:32:46
event message處理完成!
2016/05/13 23:37:45
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:37:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:37:46
event message處理完成!
2016/05/13 23:42:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:42:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:42:46
event message處理完成!
2016/05/13 23:47:45
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:47:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:47:46
event message處理完成!
2016/05/13 23:52:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:52:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:52:46
event message處理完成!
2016/05/13 23:57:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:57:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.1055.0


2016/05/13 23:57:46
event message處理完成!
