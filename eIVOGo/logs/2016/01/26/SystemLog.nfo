2016/01/26 18:07:27
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:07:29
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:07:29
event message處理完成!
2016/01/26 18:07:37
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:07:37]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:07:37]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:07:45
SELECT TOP (1) [t0].[UID], [t0].[UserName], [t0].[PID], [t0].[Password], [t0].[ContactTitle], [t0].[Address], [t0].[City], [t0].[Region], [t0].[PostalCode], [t0].[Country], [t0].[MobilePhone], [t0].[Phone], [t0].[Phone2], [t0].[Fax], [t0].[EMail], [t0].[Expiration], [t0].[Creator], [t0].[AuthID], [t0].[LevelID], [t0].[ThemeName], [t0].[Password2], [t2].[test], [t2].[UID] AS [UID2], [t2].[CurrentLevel]
FROM [dbo].[UserProfile] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[UID], [t1].[CurrentLevel]
    FROM [dbo].[UserProfileStatus] AS [t1]
    ) AS [t2] ON [t2].[UID] = [t0].[UID]
WHERE ([t0].[PID] = @p0) AND ([t2].[CurrentLevel] <> @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [ifsadmin]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1101]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[UID], [t0].[RoleID], [t0].[OrgaCateID], [t1].[OrgaCateID] AS [OrgaCateID2], [t1].[CompanyID], [t1].[CategoryID], [t2].[ContactName], [t2].[Fax], [t2].[LogoURL], [t2].[CompanyName], [t2].[CompanyID] AS [CompanyID2], [t2].[ReceiptNo], [t2].[Phone], [t2].[ContactFax], [t2].[ContactPhone], [t2].[ContactMobilePhone], [t2].[RegAddr], [t2].[UndertakerName], [t2].[Addr], [t2].[EnglishName], [t2].[EnglishAddr], [t2].[EnglishRegAddr], [t2].[ContactEmail], [t2].[UndertakerPhone], [t2].[UndertakerFax], [t2].[UndertakerMobilePhone], [t2].[InvoiceSignature], [t2].[UndertakerID], [t2].[ContactTitle], [t3].[CategoryID] AS [CategoryID2], [t3].[Category], [t3].[CharacterURL], [t4].[RoleID] AS [RoleID2], [t4].[SiteMenu], [t4].[Role]
FROM [dbo].[UserRole] AS [t0]
INNER JOIN ([dbo].[OrganizationCategory] AS [t1]
    INNER JOIN [dbo].[Organization] AS [t2] ON [t2].[CompanyID] = [t1].[CompanyID]
    INNER JOIN [dbo].[CategoryDefinition] AS [t3] ON [t3].[CategoryID] = [t1].[CategoryID]) ON [t1].[OrgaCateID] = [t0].[OrgaCateID]
INNER JOIN [dbo].[UserRoleDefinition] AS [t4] ON [t4].[RoleID] = [t0].[RoleID]
WHERE [t0].[UID] = @x1
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:30
SELECT TOP (1) [t1].[MenuID], [t1].[SiteMenu]
FROM [dbo].[UserMenu] AS [t0]
INNER JOIN [dbo].[MenuControl] AS [t1] ON [t1].[MenuID] = [t0].[MenuID]
WHERE ([t0].[RoleID] = @p0) AND ([t0].[CategoryID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:32
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:30]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:30]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:32
SELECT TOP (1) [t0].[UID], [t0].[UserName], [t0].[PID], [t0].[Password], [t0].[ContactTitle], [t0].[Address], [t0].[City], [t0].[Region], [t0].[PostalCode], [t0].[Country], [t0].[MobilePhone], [t0].[Phone], [t0].[Phone2], [t0].[Fax], [t0].[EMail], [t0].[Expiration], [t0].[Creator], [t0].[AuthID], [t0].[LevelID], [t0].[ThemeName], [t0].[Password2], [t2].[test], [t2].[UID] AS [UID2], [t2].[CurrentLevel]
FROM [dbo].[UserProfile] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[UID], [t1].[CurrentLevel]
    FROM [dbo].[UserProfileStatus] AS [t1]
    ) AS [t2] ON [t2].[UID] = [t0].[UID]
WHERE ([t0].[PID] = @p0) AND ([t2].[CurrentLevel] <> @p1)
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [ifsadmin]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1101]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[UID], [t0].[RoleID], [t0].[OrgaCateID], [t1].[OrgaCateID] AS [OrgaCateID2], [t1].[CompanyID], [t1].[CategoryID], [t2].[ContactName], [t2].[Fax], [t2].[LogoURL], [t2].[CompanyName], [t2].[CompanyID] AS [CompanyID2], [t2].[ReceiptNo], [t2].[Phone], [t2].[ContactFax], [t2].[ContactPhone], [t2].[ContactMobilePhone], [t2].[RegAddr], [t2].[UndertakerName], [t2].[Addr], [t2].[EnglishName], [t2].[EnglishAddr], [t2].[EnglishRegAddr], [t2].[ContactEmail], [t2].[UndertakerPhone], [t2].[UndertakerFax], [t2].[UndertakerMobilePhone], [t2].[InvoiceSignature], [t2].[UndertakerID], [t2].[ContactTitle], [t3].[CategoryID] AS [CategoryID2], [t3].[Category], [t3].[CharacterURL], [t4].[RoleID] AS [RoleID2], [t4].[SiteMenu], [t4].[Role]
FROM [dbo].[UserRole] AS [t0]
INNER JOIN ([dbo].[OrganizationCategory] AS [t1]
    INNER JOIN [dbo].[Organization] AS [t2] ON [t2].[CompanyID] = [t1].[CompanyID]
    INNER JOIN [dbo].[CategoryDefinition] AS [t3] ON [t3].[CategoryID] = [t1].[CategoryID]) ON [t1].[OrgaCateID] = [t0].[OrgaCateID]
INNER JOIN [dbo].[UserRoleDefinition] AS [t4] ON [t4].[RoleID] = [t0].[RoleID]
WHERE [t0].[UID] = @x1
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:32
SELECT TOP (1) [t1].[MenuID], [t1].[SiteMenu]
FROM [dbo].[UserMenu] AS [t0]
INNER JOIN [dbo].[MenuControl] AS [t1] ON [t1].[MenuID] = [t0].[MenuID]
WHERE ([t0].[RoleID] = @p0) AND ([t0].[CategoryID] = @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:32
SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:32]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:32]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:48
SELECT [t0].[ReceiptNo] AS [arg0], [t0].[CompanyName] AS [arg1], [t0].[CompanyID]
FROM [dbo].[Organization] AS [t0]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t1] ON [t1].[CompanyID] = [t0].[CompanyID]
WHERE (((
    SELECT COUNT(*)
    FROM [dbo].[OrganizationCategory] AS [t2]
    WHERE ([t2].[CategoryID] = @p0) AND ([t2].[CompanyID] = [t0].[CompanyID])
    )) > @p1) AND ([t1].[CurrentLevel] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:48]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:48]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:52
SELECT [t0].[ReceiptNo] AS [arg0], [t0].[CompanyName] AS [arg1], [t0].[CompanyID]
FROM [dbo].[Organization] AS [t0]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t1] ON [t1].[CompanyID] = [t0].[CompanyID]
WHERE (((
    SELECT COUNT(*)
    FROM [dbo].[OrganizationCategory] AS [t2]
    WHERE ([t2].[CategoryID] = @p0) AND ([t2].[CompanyID] = [t0].[CompanyID])
    )) > @p1) AND ([t1].[CurrentLevel] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:52]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:52]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
INNER JOIN ([dbo].[Organization] AS [t1]
    LEFT OUTER JOIN (
        SELECT 1 AS [test], [t2].[CompanyID]
        FROM [dbo].[OrganizationStatus] AS [t2]
        ) AS [t3] ON [t3].[CompanyID] = [t1].[CompanyID]) ON [t0].[CompanyID] = [t1].[CompanyID]
WHERE ([t3].[test] IS NOT NULL) AND ([t1].[CompanyName] LIKE @p0)
ORDER BY [t0].[ReceiptNo]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [%好德%]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
INNER JOIN ([dbo].[Organization] AS [t1]
    LEFT OUTER JOIN (
        SELECT 1 AS [test], [t2].[CompanyID]
        FROM [dbo].[OrganizationStatus] AS [t2]
        ) AS [t3] ON [t3].[CompanyID] = [t1].[CompanyID]) ON [t0].[CompanyID] = [t1].[CompanyID]
WHERE ([t3].[test] IS NOT NULL) AND ([t1].[CompanyName] LIKE @p0)
ORDER BY [t0].[ReceiptNo]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [%好德%]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[WelfareID], [t0].[SellerID], [t0].[AgencyID], [t0].[CreateTime]
FROM [dbo].[InvoiceWelfareAgency] AS [t0]
WHERE [t0].[SellerID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LevelID], [t0].[Expression], [t0].[Description]
FROM [dbo].[LevelExpression] AS [t0]
WHERE [t0].[LevelID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:57
SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:08:57
SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE @p0 = 1
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE @p0 = 1
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo] AS [arg0], [t0].[CompanyName] AS [arg1], [t0].[CompanyID]
FROM [dbo].[Organization] AS [t0]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t1] ON [t1].[CompanyID] = [t0].[CompanyID]
WHERE (((
    SELECT COUNT(*)
    FROM [dbo].[OrganizationCategory] AS [t2]
    WHERE ([t2].[CategoryID] = @p0) AND ([t2].[CompanyID] = [t0].[CompanyID])
    )) > @p1) AND ([t1].[CurrentLevel] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[MsgID], [t0].[MessageContents], [t0].[StartDate], [t0].[EndDate], [t0].[AlwaysShow], [t0].[UpdateTime], [t0].[CreateTime]
FROM [dbo].[SystemMessage] AS [t0]
WHERE ([t0].[AlwaysShow] = 1) OR (([t0].[StartDate] <= @p0) AND (DATEADD(ms, (CONVERT(BigInt,@p1 * 86400000)) % 86400000, DATEADD(day, (CONVERT(BigInt,@p1 * 86400000)) / 86400000, [t0].[EndDate])) > @p2))
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:57]
-- @p1: Input Float (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:08:57]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
INNER JOIN ([dbo].[Organization] AS [t1]
    LEFT OUTER JOIN (
        SELECT 1 AS [test], [t2].[CompanyID]
        FROM [dbo].[OrganizationStatus] AS [t2]
        ) AS [t3] ON [t3].[CompanyID] = [t1].[CompanyID]) ON [t0].[CompanyID] = [t1].[CompanyID]
WHERE ([t3].[test] IS NOT NULL) AND ([t1].[CompanyName] LIKE @p0)
ORDER BY [t0].[ReceiptNo]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [%好德%]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
INNER JOIN ([dbo].[Organization] AS [t1]
    LEFT OUTER JOIN (
        SELECT 1 AS [test], [t2].[CompanyID]
        FROM [dbo].[OrganizationStatus] AS [t2]
        ) AS [t3] ON [t3].[CompanyID] = [t1].[CompanyID]) ON [t0].[CompanyID] = [t1].[CompanyID]
WHERE ([t3].[test] IS NOT NULL) AND ([t1].[CompanyName] LIKE @p0)
ORDER BY [t0].[ReceiptNo]
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [%好德%]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[WelfareID], [t0].[SellerID], [t0].[AgencyID], [t0].[CreateTime]
FROM [dbo].[InvoiceWelfareAgency] AS [t0]
WHERE [t0].[SellerID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LevelID], [t0].[Expression], [t0].[Description]
FROM [dbo].[LevelExpression] AS [t0]
WHERE [t0].[LevelID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[OrgaCateID], [t0].[CompanyID], [t0].[CategoryID]
FROM [dbo].[OrganizationCategory] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:34
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[KeyID] = @p0
-- @p0: Input UniqueIdentifier (Size = -1; Prec = 0; Scale = 0) [99dbbe8e-9639-4d4d-8aa9-1f6ef30b18eb]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:35
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:44
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:44
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:44
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:45
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[InvoiceTrackCode] AS [t0]
WHERE [t0].[Year] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2016]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT CONVERT(Int,[t0].[Year]) AS [Year], [t0].[PeriodNo] AS [arg0], [t0].[TrackCode]
FROM [dbo].[InvoiceTrackCode] AS [t0]
WHERE [t0].[Year] = @p0
ORDER BY [t0].[PeriodNo]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2016]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 05:11:41]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:09:45]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:09:45
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:09:45]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:09:45]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:10:58
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:10:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:10:58
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407076</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:21:57</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>9861</RandomNumber>
  <InvoiceItem>
    <Description>1夸脫  杏仁</Description>
    <Quantity>1</Quantity>
    <UnitPrice>380</UnitPrice>
    <Amount>380</Amount>
    <SequenceNumber>0</SequenceNumber>
  </InvoiceItem>
  <InvoiceItem>
    <Description>小 夏威夷</Description>
    <Quantity>1</Quantity>
    <UnitPrice>180</UnitPrice>
    <Amount>180</Amount>
    <SequenceNumber>1</SequenceNumber>
  </InvoiceItem>
  <SalesAmount>533</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>27</TaxAmount>
  <TotalAmount>560</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:10:58]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [發票開立人為非註冊店家:42375269，TAG:< SellerId />；也未註冊於機構:27736953，代理發票傳送;
聯絡人名稱錯誤，上傳資料：，TAG:< Name /> :;
聯絡人地址錯誤，上傳資料：，TAG:< Address />]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:10:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:10:58
event message處理完成!
2016/01/26 18:11:00
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:02
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:04
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18176]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:31
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:31
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:11:31]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:31
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:31
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:31
event message處理完成!
2016/01/26 18:11:31
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:33
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:35
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18177]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:36
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:36
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407078</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:16</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>2397</RandomNumber>
  <InvoiceItem>
    <Description>小 香濃起司</Description>
    <Quantity>1</Quantity>
    <UnitPrice>95</UnitPrice>
    <Amount>95</Amount>
    <SequenceNumber>0</SequenceNumber>
  </InvoiceItem>
  <InvoiceItem>
    <Description>中 香濃起司</Description>
    <Quantity>1</Quantity>
    <UnitPrice>130</UnitPrice>
    <Amount>130</Amount>
    <SequenceNumber>1</SequenceNumber>
  </InvoiceItem>
  <SalesAmount>214</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>11</TaxAmount>
  <TotalAmount>225</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:11:36]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [發票開立人為非註冊店家:42375269，TAG:< SellerId />；也未註冊於機構:27736953，代理發票傳送;
聯絡人名稱錯誤，上傳資料：，TAG:< Name /> :;
聯絡人地址錯誤，上傳資料：，TAG:< Address />]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:36
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:36
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:37
event message處理完成!
2016/01/26 18:11:37
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:39
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:11:41
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18178]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:12:28
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:12:28
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:12:28
event message處理完成!
2016/01/26 18:14:21
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:21
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:14:21]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:21
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:21
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:21
event message處理完成!
2016/01/26 18:14:21
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:23
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:14:25
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18179]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:29
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:29
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:16:29]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:29
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:29
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:29
event message處理完成!
2016/01/26 18:16:29
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:31
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:16:34
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18180]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:17:49]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:49
event message處理完成!
2016/01/26 18:17:52
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:17:54
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18181]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:01
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:01
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:19:01]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:01
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:01
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:01
event message處理完成!
2016/01/26 18:19:01
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:03
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:19:05
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18182]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:07
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[InvoiceIssuerAgent] AS [t0]
            WHERE ([t0].[AgentID] = @p0) AND ([t0].[IssuerID] = @p1)
            ) THEN 1
        ELSE 0
     END) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2423]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:07
INSERT INTO [dbo].[ExceptionLog]([CompanyID], [DocID], [TypeID], [DataContent], [LogTime], [Message], [IsCSV])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)

SELECT CONVERT(Int,SCOPE_IDENTITY()) AS [value]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [Null]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p3: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [<?xml version="1.0" encoding="utf-16"?>
<InvoiceRootInvoice xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <InvoiceNumber>FT42407077</InvoiceNumber>
  <InvoiceDate>2016/01/26</InvoiceDate>
  <InvoiceTime>16:22:07</InvoiceTime>
  <SellerId>42375269</SellerId>
  <BuyerId>0000000000</BuyerId>
  <InvoiceType>02</InvoiceType>
  <DonateMark>0</DonateMark>
  <PrintMark>Y</PrintMark>
  <RandomNumber>1185</RandomNumber>
  <SalesAmount>0</SalesAmount>
  <FreeTaxSalesAmount>0</FreeTaxSalesAmount>
  <ZeroTaxSalesAmount>0</ZeroTaxSalesAmount>
  <TaxType>1</TaxType>
  <TaxRate>0.05</TaxRate>
  <TaxAmount>0</TaxAmount>
  <TotalAmount>0</TotalAmount>
  <Contact />
</InvoiceRootInvoice>]
-- @p4: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:20:07]
-- @p5: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [值不能為 null。
參數名稱: source]
-- @p6: Input Bit (Size = -1; Prec = 0; Scale = 0) [Null]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:07
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:07
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:07
event message處理完成!
2016/01/26 18:20:07
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[CompanyID] = @p1) AND ([t0].[LogID] <= @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:09
SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[ReceiptNo] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [42375269]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[TypeID] = @p0) AND ([t2].[test] IS NOT NULL) AND ([t0].[LogID] <= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:20:11
SELECT TOP (1) [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
ORDER BY [t0].[LogID] DESC
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID] AS [Key]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE [t2].[test] IS NOT NULL
GROUP BY [t0].[CompanyID]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID], [t0].[CompanyID], [t0].[DocID], [t0].[TypeID], [t0].[DataContent], [t0].[LogTime], [t0].[Message], [t0].[IsCSV]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE (((@x1 IS NULL) AND ([t0].[CompanyID] IS NULL)) OR ((@x1 IS NOT NULL) AND ([t0].[CompanyID] IS NOT NULL) AND (@x1 = [t0].[CompanyID]))) AND ([t2].[test] IS NOT NULL)
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t2].[test], [t2].[LogID]
FROM [dbo].[ExceptionLog] AS [t0]
LEFT OUTER JOIN (
    SELECT 1 AS [test], [t1].[LogID]
    FROM [dbo].[ExceptionReplication] AS [t1]
    ) AS [t2] ON [t2].[LogID] = [t0].[LogID]
WHERE ([t0].[LogID] <= @p0) AND ([t2].[test] IS NOT NULL)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

DELETE FROM [dbo].[ExceptionReplication] WHERE [LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[LogID]
FROM [dbo].[ExceptionReplication] AS [t0]
WHERE [t0].[LogID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [18183]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:22:34
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:22:34
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:22:34
event message處理完成!
2016/01/26 18:27:36
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[InvoiceID]
WHERE ([t0].[InvoiceDate] >= @p0) AND ([t1].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[TrackCode] + [t1].[No] AS [value]
FROM [dbo].[CDS_Document] AS [t0]
INNER JOIN [dbo].[InvoiceItem] AS [t1] ON ((
    SELECT [t2].[SourceID]
    FROM [dbo].[DerivedDocument] AS [t2]
    WHERE [t2].[DocID] = [t0].[DocID]
    )) = [t1].[InvoiceID]
WHERE ([t0].[DocType] = @p0) AND ([t1].[InvoiceDate] >= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[CDS_Document] AS [t0]
LEFT OUTER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[DocID]
WHERE ([t1].[AllowanceDate] >= @p0) AND ([t0].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[InvoiceAllowanceCancellation] AS [t0]
INNER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[AllowanceID]
WHERE ([t1].[AllowanceDate] >= @p0) OR ([t0].[CancelDate] >= @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND (([t0].[MESSAGE_DTS] >= @p2) OR ([t0].[InvoiceDate] >= @p3))
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[InvoiceItem] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[InvoiceID]
WHERE ([t0].[InvoiceDate] >= @p0) AND ([t1].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[TrackCode] + [t1].[No] AS [value]
FROM [dbo].[CDS_Document] AS [t0]
INNER JOIN [dbo].[InvoiceItem] AS [t1] ON ((
    SELECT [t2].[SourceID]
    FROM [dbo].[DerivedDocument] AS [t2]
    WHERE [t2].[DocID] = [t0].[DocID]
    )) = [t1].[InvoiceID]
WHERE ([t0].[DocType] = @p0) AND ([t1].[InvoiceDate] >= @p1)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[CDS_Document] AS [t0]
LEFT OUTER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[DocID]
WHERE ([t1].[AllowanceDate] >= @p0) AND ([t0].[DocType] = @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t1].[AllowanceNumber]
FROM [dbo].[InvoiceAllowanceCancellation] AS [t0]
INNER JOIN [dbo].[InvoiceAllowance] AS [t1] ON [t1].[AllowanceID] = [t0].[AllowanceID]
WHERE ([t1].[AllowanceDate] >= @p0) OR ([t0].[CancelDate] >= @p1)
-- @p0: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p1: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND (([t0].[MESSAGE_DTS] >= @p2) OR ([t0].[InvoiceDate] >= @p3))
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- @p3: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0401]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[TrackCode] + [t0].[No] AS [value]
FROM [dbo].[V_Logs] AS [t0]
WHERE ([t0].[STATUS] = @p0) AND ([t0].[DocType] = @p1) AND ([t0].[MESSAGE_DTS] >= @p2)
-- @p0: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [C]
-- @p1: Input VarChar (Size = 8000; Prec = 0; Scale = 0) [D0501]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2015/11/26 上午 12:00:00]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:27:36
event message處理完成!
2016/01/26 18:32:37
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:32:37
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:32:37
event message處理完成!
2016/01/26 18:37:38
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:37:38
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:37:38
event message處理完成!
2016/01/26 18:39:52
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:39:52
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:39:52
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:39:53
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:09:45]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:39:53]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:42:39
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:42:39
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:42:39
event message處理完成!
2016/01/26 18:47:39
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:47:39
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:47:39
event message處理完成!
2016/01/26 18:52:41
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:52:41
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:52:41
event message處理完成!
2016/01/26 18:57:42
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:57:42
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 18:57:42
event message處理完成!
2016/01/26 19:02:43
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:02:43
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:02:43
event message處理完成!
2016/01/26 19:07:44
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:07:44
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:07:44
event message處理完成!
2016/01/26 19:09:58
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:09:59
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:09:59
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:09:59
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 06:39:53]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 07:09:59]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:12:45
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:12:45
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:12:45
event message處理完成!
2016/01/26 19:17:47
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:17:47
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:17:47
event message處理完成!
2016/01/26 19:22:47
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:22:47
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:22:47
event message處理完成!
2016/01/26 19:27:48
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:27:48
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:27:48
event message處理完成!
2016/01/26 19:32:50
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:32:50
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:32:50
event message處理完成!
2016/01/26 19:37:51
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:37:51
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:37:51
event message處理完成!
2016/01/26 19:40:04
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:40:05
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:40:05
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:40:05
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 07:09:59]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 07:40:05]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:42:52
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:42:52
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:42:52
event message處理完成!
2016/01/26 19:47:52
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:47:52
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:47:52
event message處理完成!
2016/01/26 19:52:54
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:52:54
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:52:54
event message處理完成!
2016/01/26 19:57:55
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:57:55
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 19:57:55
event message處理完成!
2016/01/26 20:02:55
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:02:55
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:02:55
event message處理完成!
2016/01/26 20:07:57
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:07:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:07:58
event message處理完成!
2016/01/26 20:10:10
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:10:11
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:10:11
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:10:11
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 07:40:05]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 08:10:11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:12:58
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:12:58
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:12:58
event message處理完成!
2016/01/26 20:17:59
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:17:59
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:17:59
event message處理完成!
2016/01/26 20:23:00
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:23:00
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:23:00
event message處理完成!
2016/01/26 20:28:01
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:28:01
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:28:01
event message處理完成!
2016/01/26 20:33:02
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:33:02
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:33:02
event message處理完成!
2016/01/26 20:38:03
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:38:03
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:38:03
event message處理完成!
2016/01/26 20:40:17
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:40:18
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:40:18
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:40:18
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 08:10:11]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 08:40:18]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:43:05
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:43:05
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:43:05
event message處理完成!
2016/01/26 20:48:06
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:48:06
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:48:06
event message處理完成!
2016/01/26 20:53:07
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:53:07
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:53:07
event message處理完成!
2016/01/26 20:58:08
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:58:08
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 20:58:08
event message處理完成!
2016/01/26 21:03:09
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:03:09
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:03:09
event message處理完成!
2016/01/26 21:08:11
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:08:11
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:08:11
event message處理完成!
2016/01/26 21:10:24
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:10:25
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:10:25
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:10:25
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 08:40:18]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 09:10:25]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:13:11
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:13:11
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:13:11
event message處理完成!
2016/01/26 21:18:12
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:18:12
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:18:12
event message處理完成!
2016/01/26 21:23:13
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:23:14
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:23:14
event message處理完成!
2016/01/26 21:28:15
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:28:15
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:28:15
event message處理完成!
2016/01/26 21:33:16
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:33:16
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:33:16
event message處理完成!
2016/01/26 21:38:17
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:38:17
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:38:17
event message處理完成!
2016/01/26 21:40:31
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:40:32
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 09:10:25]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 09:40:32]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:43:18
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:43:18
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:43:18
event message處理完成!
2016/01/26 21:48:19
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:48:20
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:48:20
event message處理完成!
2016/01/26 21:53:21
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:53:21
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:53:21
event message處理完成!
2016/01/26 21:58:22
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:58:22
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 21:58:22
event message處理完成!
2016/01/26 22:03:24
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:03:24
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:03:24
event message處理完成!
2016/01/26 22:08:25
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:08:25
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:08:25
event message處理完成!
2016/01/26 22:10:38
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:10:39
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:10:39
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:10:39
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 09:40:32]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 10:10:39]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:13:25
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:13:25
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:13:25
event message處理完成!
2016/01/26 22:18:27
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:18:27
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:18:27
event message處理完成!
2016/01/26 22:23:28
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:23:28
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:23:28
event message處理完成!
2016/01/26 22:28:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:28:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:28:30
event message處理完成!
2016/01/26 22:33:30
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:33:30
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:33:30
event message處理完成!
2016/01/26 22:38:32
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:38:32
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:38:32
event message處理完成!
2016/01/26 22:40:46
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:40:48
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:40:48
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:40:48
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 10:10:39]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 10:40:48]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:43:33
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:43:33
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:43:33
event message處理完成!
2016/01/26 22:48:36
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:48:36
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:48:36
event message處理完成!
2016/01/26 22:53:36
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:53:36
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:53:36
event message處理完成!
2016/01/26 22:58:37
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:58:37
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 22:58:37
event message處理完成!
2016/01/26 23:03:39
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:03:39
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:03:39
event message處理完成!
2016/01/26 23:08:40
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:08:40
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:08:40
event message處理完成!
2016/01/26 23:10:54
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:10:55
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:10:55
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:10:55
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 10:40:48]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 11:10:55]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:13:42
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:13:42
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:13:42
event message處理完成!
2016/01/26 23:18:43
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:18:43
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:18:43
event message處理完成!
2016/01/26 23:23:44
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:23:44
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:23:44
event message處理完成!
2016/01/26 23:28:46
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:28:46
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:28:46
event message處理完成!
2016/01/26 23:33:47
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:33:47
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:33:47
event message處理完成!
2016/01/26 23:38:49
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:38:49
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:38:49
event message處理完成!
2016/01/26 23:41:03
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:41:04
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ReceiptNo]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[CompanyID] = @p0) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p1)
    ))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:41:04
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT TOP (1) [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE ([t0].[ReceiptNo] = @p0) AND (([t0].[CompanyID] = @p1) OR (EXISTS(
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceIssuerAgent] AS [t1]
    WHERE ([t1].[IssuerID] = [t0].[CompanyID]) AND ([t1].[AgentID] = @p2)
    )))
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [27736953]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM (
    SELECT NULL AS [EMPTY]
    FROM [dbo].[InvoiceTrackCode] AS [t0]
    INNER JOIN [dbo].[InvoiceTrackCodeAssignment] AS [t1] ON [t0].[TrackID] = [t1].[TrackID]
    WHERE (((
        SELECT COUNT(*)
        FROM [dbo].[UnassignedInvoiceNo] AS [t2]
        WHERE ([t2].[TrackID] = [t1].[TrackID]) AND ([t2].[SellerID] = [t1].[SellerID])
        )) > @p0) AND ([t0].[Year] = @p1) AND ([t0].[PeriodNo] = @p2) AND ([t1].[SellerID] = @p3)
    GROUP BY [t1].[TrackID]
    ) AS [t3]
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [0]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [2015]
-- @p2: Input Int (Size = -1; Prec = 0; Scale = 0) [6]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:41:04
SELECT TOP (1) [t0].[CompanyID], [t0].[X509Certificate], [t0].[Thumbprint], [t0].[PKCS12], [t0].[KeyID], [t0].[IsActivated]
FROM [dbo].[OrganizationToken] AS [t0]
WHERE [t0].[Thumbprint] = @p0
-- @p0: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [6E68A72B06F8A98FD9173C4F6776FB5F17A67C04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[ContactName], [t0].[Fax], [t0].[LogoURL], [t0].[CompanyName], [t0].[CompanyID], [t0].[ReceiptNo], [t0].[Phone], [t0].[ContactFax], [t0].[ContactPhone], [t0].[ContactMobilePhone], [t0].[RegAddr], [t0].[UndertakerName], [t0].[Addr], [t0].[EnglishName], [t0].[EnglishAddr], [t0].[EnglishRegAddr], [t0].[ContactEmail], [t0].[UndertakerPhone], [t0].[UndertakerFax], [t0].[UndertakerMobilePhone], [t0].[InvoiceSignature], [t0].[UndertakerID], [t0].[ContactTitle]
FROM [dbo].[Organization] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[CompanyID], [t0].[CurrentLevel], [t0].[LastTimeToAcknowledge], [t0].[RequestPeriodicalInterval], [t0].[SetToPrintInvoice], [t0].[InvoicePrintView], [t0].[IronSteelIndustry], [t0].[Entrusting], [t0].[AuthorizationNo], [t0].[TokenID], [t0].[SetToOutsourcingCS], [t0].[AllowancePrintView], [t0].[SetToNotifyCounterpartBySMS], [t0].[DownloadDataNumber], [t0].[DownloadDispatch], [t0].[UploadBranchTrackBlank], [t0].[PrintAll], [t0].[SettingInvoiceType], [t0].[SubscribeB2BInvoicePDF], [t0].[UseB2BStandalone], [t0].[DisableIssuingNotice], [t0].[DisableWinningNotice]
FROM [dbo].[OrganizationStatus] AS [t0]
WHERE [t0].[CompanyID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

UPDATE [dbo].[OrganizationStatus]
SET [LastTimeToAcknowledge] = @p6
WHERE ([CompanyID] = @p0) AND ([CurrentLevel] = @p1) AND ([LastTimeToAcknowledge] = @p2) AND ([RequestPeriodicalInterval] = @p3) AND (NOT ([SetToPrintInvoice] = 1)) AND ([InvoicePrintView] IS NULL) AND ([IronSteelIndustry] IS NULL) AND ([Entrusting] IS NULL) AND ([AuthorizationNo] IS NULL) AND ([TokenID] IS NULL) AND ([SetToOutsourcingCS] = @p4) AND ([AllowancePrintView] IS NULL) AND (NOT ([SetToNotifyCounterpartBySMS] = 1)) AND (NOT ([DownloadDataNumber] = 1)) AND ([DownloadDispatch] IS NULL) AND (NOT ([UploadBranchTrackBlank] = 1)) AND (NOT ([PrintAll] = 1)) AND ([SettingInvoiceType] = @p5) AND (NOT ([SubscribeB2BInvoicePDF] = 1)) AND (NOT ([UseB2BStandalone] = 1)) AND ([DisableIssuingNotice] IS NULL) AND (NOT ([DisableWinningNotice] = 1))
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [2422]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1103]
-- @p2: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 11:10:55]
-- @p3: Input Int (Size = -1; Prec = 0; Scale = 0) [1800]
-- @p4: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p5: Input Int (Size = -1; Prec = 0; Scale = 0) [7]
-- @p6: Input DateTime (Size = -1; Prec = 0; Scale = 0) [2016/1/26 下午 11:41:04]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:43:50
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:43:50
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:43:50
event message處理完成!
2016/01/26 23:48:52
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:48:52
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:48:52
event message處理完成!
2016/01/26 23:53:53
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:53:53
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:53:53
event message處理完成!
2016/01/26 23:58:55
SELECT [t1].[DocID], [t1].[DocType], [t1].[DocDate], [t1].[CurrentStep]
FROM [dbo].[DocumentReplication] AS [t0]
INNER JOIN [dbo].[CDS_Document] AS [t1] ON [t1].[DocID] = [t0].[DocID]
LEFT OUTER JOIN [dbo].[DocumentOwner] AS [t2] ON [t2].[DocID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[Organization] AS [t3] ON [t3].[CompanyID] = [t2].[OwnerID]
LEFT OUTER JOIN [dbo].[OrganizationStatus] AS [t4] ON [t4].[CompanyID] = [t3].[CompanyID]
LEFT OUTER JOIN [dbo].[InvoiceItem] AS [t5] ON [t5].[InvoiceID] = [t1].[DocID]
LEFT OUTER JOIN [dbo].[InvoiceBuyer] AS [t6] ON [t6].[InvoiceID] = [t5].[InvoiceID]
WHERE ([t1].[DocType] = @p0) AND ([t4].[SetToNotifyCounterpartBySMS] = @p1) AND ([t6].[ReceiptNo] = @p2)
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- @p1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- @p2: Input NVarChar (Size = 4000; Prec = 0; Scale = 0) [0000000000]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

delete from DocumentReplication
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[SMSNotificationQueue] AS [t0]
WHERE [t0].[MessageID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:58:55
SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [10]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [12]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT [t0].[DocID], [t0].[TypeID]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [11]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0

SELECT COUNT(*) AS [value]
FROM [dbo].[DocumentDispatch] AS [t0]
WHERE [t0].[TypeID] = @p0
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [14]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.6.81.0


2016/01/26 23:58:55
event message處理完成!
